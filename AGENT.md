*Документ для GPT-5.1-Codex-Max / других агентов, работающих с репозиторием detai-site.*

# **1. Общие правила**

Этот проект — фронтенд-сайт экосистемы **DETai**, созданный на основе **Next.js (App Router) + TypeScript + Tailwind CSS** и развёртываемый на **Vercel**.

Твоё поведение должно быть:

* **строго структурированным**
* **неразрушающим архитектуру**
---

# **2. Архитектура проекта**
В README.md
---

# **3. Правила разработки**

### **3.1. Страницы / App Router**

* Всё внутри `app/` — это страницы или сегменты URL.
* Для элементов страницы (карточки, блоки и т.п.) используй локальные папки:

  ```
  app/products/_components/ProductCard.tsx
  ```
* Для группировки без изменения URL используй:

  ```
  app/(marketing)/page.tsx
  ```

### **3.2. Компоненты**

Разделение:

1. **components/ui/** — атомарные примитивы

   * кнопки
   * поля
   * ссылки
   * иконки

2. **components/sections/** — крупные блоки

3. **components/layout/** — Header, Footer, Layout

4. **локальные компоненты страницы** → в `_components/` рядом с page.tsx

Компоненты должны быть:

* изолированные
* переиспользуемые
* без бизнес-логики

**Императивный DOM запрещён.**

---

# **4. Server / Client**

### **4.1. По умолчанию — серверный компонент**

React-компоненты Next.js — серверные, если не указано иначе.

### **4.2. Клиентские компоненты**

Используются при:

* событиях (onClick, onChange…)
* useState, useEffect
* анимации

Файл должен начинаться с:

```ts
"use client";
```

### **4.3. Server Actions**

Используй server actions для мутаций:

```ts
"use server";

export async function createUser(data: FormData) {
  ...
}
```

Клиентские компоненты вызывают server actions через импорт.

### **4.4. API**

Файлы API:

```
app/api/products/route.ts
```

Поддерживают GET/POST/PUT/DELETE.

В клиентских компонентах **запрещено**:

* обращаться к базе
* делать приватные API-запросы
* хранить токены

---

# **5. Tailwind CSS**

### **5.1. Основные правила**

* Tailwind — основной способ стилизации.
* Не используй CSS-файлы, кроме globals.css.
* Классы должны идти в порядке:

  1. layout
  2. sizing
  3. spacing
  4. typography
  5. visual
  6. interactive

Используй Prettier с Tailwind plugin.

### **5.2. Минимизация @apply**

Использовать `@apply` только для:

* кнопок
* часто повторяющихся utility-классов

### **5.3. Дизайн-токены**

Хранятся в `tailwind.config.js`:

* colors
* spacing
* radii
* typography

Все цвета должны ссылаться на токены (никаких “#123456” в JSX).

---

# **6. Локализация (i18n)**

### **6.1. Хранение**

Файлы переводов:

```
i18n/en.json
i18n/ru.json
i18n/de.json
...
```

### **6.2. Формат ключей**

* snake_case или camelCase
* максимум **2–3 уровня вложенности**
* всегда с неймспейсом:

```
header.title
footer.contact
global.ok
global.cancel
```

### **6.3. Новые языки**

При добавлении языка:

1. создай `xx.json`
2. продублируй все ключи
3. обнови конфиг i18n

**Строки не пишутся в коде — только ключи.**

---

# **7. SEO / публичные файлы**

### **7.1. Robots & Sitemap**

Простая версия — статические файлы в `public/`:

```
public/robots.txt
public/sitemap.xml
```

### **7.2. OpenGraph**

OG-images должны лежать в:

```
public/images/og/
```

или генерироваться через:

```
app/opengraph-image.tsx
```

### **9.3. Проверки**

Делай проверки
